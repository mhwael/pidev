<!doctype html>
<html lang="zxx">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Shop - Products</title>

    <base href="/front_template/">

    <link rel="icon" href="img/favicon.png">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/all.css">
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/themify-icons.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/slick.css">
    <link rel="stylesheet" href="css/style.css">

    <style>
        .navbar-brand img { height: 44px !important; width: auto !important; object-fit: contain; }

        .body_bg{
            position: relative;
            min-height: 100vh;
            background: url("img/breadcrumb.png") center/cover no-repeat fixed;
        }
        .body_bg::before{
            content:"";
            position:absolute;
            inset:0;
            background: linear-gradient(135deg, rgba(0,0,0,.68), rgba(0,0,0,.38));
            pointer-events:none;
            z-index:0;
        }
        .body_bg > *{ position: relative; z-index:1; }

        .breadcrumb_bg{ background: transparent !important; padding: 0 !important; }
        .breadcrumb{
            padding: 90px 0 35px !important;
            margin-bottom: 0 !important;
        }
        .breadcrumb_iner{ padding: 0 !important; }
        .breadcrumb_iner_item h2{
            font-weight: 900;
            letter-spacing: .3px;
            font-size: 56px;
            margin-bottom: 8px;
        }
        .breadcrumb_iner_item p{
            color: rgba(255,255,255,.85);
            margin: 0;
            font-weight: 600;
        }
        @media (max-width: 991px){
            .breadcrumb{ padding: 75px 0 28px !important; }
            .breadcrumb_iner_item h2{ font-size: 40px; }
        }
        @media (max-width: 575px){
            .breadcrumb_iner_item h2{ font-size: 32px; }
        }

        .section_padding{ padding: 35px 0 70px !important; }

        .filter-wrap{
            background: rgba(255,255,255,.95);
            border-radius:16px;
            padding:14px;
            box-shadow:0 10px 30px rgba(0,0,0,.18);
            border:1px solid rgba(255,255,255,.20);
            backdrop-filter: blur(8px);
        }
        .filter-wrap .form-control{
            height:46px;
            border-radius:12px;
            border:1px solid rgba(0,0,0,.10);
        }
        .filter-title{ font-weight:900; margin:0 0 10px; color:#111; }

        .p-card{
            background: rgba(255,255,255,.95);
            border-radius:18px;
            overflow:hidden;
            border:1px solid rgba(255,255,255,.25);
            box-shadow:0 12px 35px rgba(0,0,0,.20);
            transition:transform .18s ease, box-shadow .18s ease;
            height:100%;
            position: relative;
            backdrop-filter: blur(8px);
        }
        .p-card:hover{
            transform:translateY(-5px);
            box-shadow:0 18px 50px rgba(0,0,0,.28);
        }
        .p-media{
            height:230px;
            background: linear-gradient(180deg,#f6f7f9,#ffffff);
            display:flex;
            align-items:center;
            justify-content:center;
            padding:14px;
            position: relative;
        }
        .p-media img{ width:100%; height:100%; object-fit:contain; }
        .p-placeholder{
            height:230px;
            background:#111;
            display:flex;
            align-items:center;
            justify-content:center;
            color:#bbb;
        }
        .p-body{ padding:14px 14px 16px; }
        .p-title{
            font-weight:900;
            font-size:1.05rem;
            line-height:1.15;
            margin:6px 0 8px;
            color:#111;
        }
        .p-badges{
            display:flex;
            justify-content:space-between;
            align-items:center;
            gap:10px;
            flex-wrap:wrap;
            margin-bottom:10px;
        }
        .p-badge{
            display:inline-flex;
            align-items:center;
            gap:8px;
            padding:6px 10px;
            border-radius:999px;
            font-weight:800;
            font-size:.78rem;
            background:rgba(108,117,125,.12);
            color:#6c757d;
        }
        .p-badge.cat{ background:rgba(13,110,253,.12); color:#0d6efd; }

        .stock-badge{
            position:absolute;
            top:12px;
            right:12px;
            padding:7px 10px;
            border-radius:999px;
            font-weight:900;
            font-size:.78rem;
            display:inline-flex;
            align-items:center;
            gap:8px;
            box-shadow:0 10px 18px rgba(0,0,0,.15);
        }
        .stock-in{ background: rgba(25,135,84,.92); color: #fff; }
        .stock-low{ background: rgba(255,193,7,.95); color: #111; }
        .stock-out{ background: rgba(220,53,69,.95); color: #fff; }

        .p-price{ font-weight:900; font-size:1.05rem; color:#111; }
        .p-desc{ color:#6c757d; font-size:.9rem; margin:10px 0 0; min-height:38px; }

        .p-cta{ margin-top:14px; }
        .btn_1{ border-radius:999px; font-weight:800; letter-spacing:.2px; }

        .footer_part{ background: transparent !important; }
        .copygight_text{ background: rgba(0,0,0,.20) !important; }

        /* small nav pill buttons */
        .nav-pill-btn{
            display:inline-flex;
            align-items:center;
            gap:10px;
            padding:10px 14px;
            border-radius:999px;
            background: rgba(255,255,255,.12);
            color:#fff;
            font-weight:900;
            text-decoration:none;
            border:1px solid rgba(255,255,255,.18);
        }
        .nav-pill-btn:hover{ color:#fff; background: rgba(255,255,255,.18); }
    </style>
</head>

<body>
<div class="body_bg">

    <header class="main_menu single_page_menu">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-12">
                    <nav class="navbar navbar-expand-lg navbar-light">
                        <a class="navbar-brand" href="/">
                            <img src="img/levelup_logo.png" alt="LevelUp">
                        </a>

                        <button class="navbar-toggler" type="button" data-toggle="collapse"
                                data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                aria-expanded="false" aria-label="Toggle navigation">
                            <span class="menu_icon"><i class="fas fa-bars"></i></span>
                        </button>

                        <div class="collapse navbar-collapse main-menu-item" id="navbarSupportedContent">
                            <ul class="navbar-nav">
                                <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                                <li class="nav-item"><a class="nav-link" href="{{ path('shop_products') }}">Shop</a></li>
                                <li class="nav-item"><a class="nav-link" href="{{ path('my_orders') }}">My Orders</a></li>
                                <li class="nav-item"><a class="nav-link" href="{{ path('orders_index') }}">Dashboard</a></li>
                            </ul>
                        </div>

                        <div class="d-none d-lg-flex align-items-center" style="gap:10px;">
                            <a class="nav-pill-btn" href="{{ path('shop_cart') }}">
                                <i class="fas fa-shopping-cart"></i> Cart
                            </a>
                            <a class="nav-pill-btn" href="{{ path('my_orders') }}">
                                <i class="fas fa-receipt"></i> Orders
                            </a>
                        </div>

                    </nav>
                </div>
            </div>
        </div>
    </header>

    <section class="breadcrumb breadcrumb_bg">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb_iner text-center">
                        <div class="breadcrumb_iner_item">
                            <h2>Shop Products</h2>
                            <p>Browse games, accessories and gear — fast & clean.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section_padding">
        <div class="container">

            {% for msg in app.flashes('success') %}
                <div class="alert alert-success">{{ msg }}</div>
            {% endfor %}
            {% for msg in app.flashes('error') %}
                <div class="alert alert-danger">{{ msg }}</div>
            {% endfor %}

            <div class="row justify-content-center mb-4">
                <div class="col-lg-10">
                    <div class="filter-wrap">
                        <div class="filter-title">Search & Filter</div>

                        <form method="get" action="{{ path('shop_products') }}" class="row g-2 align-items-center">
                            <div class="col-md-5">
                                <input class="form-control" name="q" placeholder="Search by name..." value="{{ q }}">
                            </div>

                            <div class="col-md-4">
                                <select class="form-control" name="category">
                                    <option value="">All categories</option>
                                    {% for c in categories %}
                                        <option value="{{ c }}" {% if c == category %}selected{% endif %}>{{ c }}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <div class="col-md-2 d-grid">
                                <button class="btn btn-primary" type="submit">
                                    <i class="fas fa-search mr-1"></i> Search
                                </button>
                            </div>

                            <div class="col-md-1 d-grid">
                                <a class="btn btn-light" href="{{ path('shop_products') }}" title="Reset">
                                    <i class="fas fa-times"></i>
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="row">
                {% for p in products %}
                    {% set imgSrc = null %}
                    {% if p.image %}
                        {% if p.image starts with('http') or p.image starts with('/') %}
                            {% set imgSrc = p.image %}
                        {% else %}
                            {% set imgSrc = asset('uploads/products/' ~ p.image) %}
                        {% endif %}
                    {% endif %}

                    <div class="col-lg-4 col-sm-6 mb-4">
                        <a href="{{ path('shop_product_show', {id: p.id}) }}" style="text-decoration:none;">
                            <div class="p-card">

                                <div class="p-media">
                                    {% if p.stock is defined %}
                                        {% if p.stock <= 0 %}
                                            <span class="stock-badge stock-out"><i class="fas fa-times-circle"></i> Out</span>
                                        {% elseif p.stock <= 5 %}
                                            <span class="stock-badge stock-low"><i class="fas fa-exclamation-circle"></i> Low ({{ p.stock }})</span>
                                        {% else %}
                                            <span class="stock-badge stock-in"><i class="fas fa-check-circle"></i> In stock</span>
                                        {% endif %}
                                    {% endif %}

                                    {% if imgSrc %}
                                        <img src="{{ imgSrc }}" alt="{{ p.name }}"
                                             onerror="this.onerror=null;this.src='{{ asset('uploads/products/placeholder.png') }}';">
                                    {% else %}
                                        <div class="p-placeholder w-100">No image</div>
                                    {% endif %}
                                </div>

                                <div class="p-body">
                                    <div class="p-badges">
                                        <span class="p-badge cat">{{ p.category ?? 'Uncategorized' }}</span>
                                        <span class="p-badge"><i class="fas fa-star"></i> Featured</span>
                                    </div>

                                    <div class="p-title">{{ p.name }}</div>

                                    <div class="d-flex align-items-center justify-content-between">
                                        <div class="p-price">
                                            {{ (p.price ?? 0)|number_format(2, '.', '') }} TND
                                        </div>
                                        {% if p.stock is defined %}
                                            <small class="text-muted font-weight-bold">Stock: {{ p.stock }}</small>
                                        {% endif %}
                                    </div>

                                    <p class="p-desc">
                                        {% if p.description %}
                                            {{ p.description|slice(0, 110) }}{% if p.description|length > 110 %}...{% endif %}
                                        {% else %}
                                            No description available.
                                        {% endif %}
                                    </p>

                                    <div class="p-cta">
                                        <span class="btn_1 w-100 text-center">View & Add to Cart</span>
                                    </div>
                                </div>

                            </div>
                        </a>
                    </div>
                {% else %}
                    <div class="col-12 text-center text-white-50">
                        <p>No products found.</p>
                    </div>
                {% endfor %}
            </div>

        </div>
    </section>

    <footer class="footer_part">
        <div class="copygight_text">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <div class="copyright_text">
                            <p>© {{ "now"|date("Y") }} All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

</div>

<script src="js/jquery-1.12.1.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.magnific-popup.js"></script>
<script src="js/swiper.min.js"></script>
<script src="js/masonry.pkgd.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/slick.min.js"></script>
<script src="js/jquery.counterup.min.js"></script>
<script src="js/waypoints.min.js"></script>
<script src="js/contact.js"></script>
<script src="js/jquery.ajaxchimp.min.js"></script>
<script src="js/jquery.form.js"></script>
<script src="js/jquery.validate.min.js"></script>
<script src="js/mail-script.js"></script>
<script src="js/custom.js"></script>
</body>
</html>