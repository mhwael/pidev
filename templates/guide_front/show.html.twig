{% extends 'front.html.twig' %}

{% block title %}{{ guide.title }} - Guide{% endblock %}

{% block body %}
{# 1. HERO SECTION #}
<section class="breadcrumb breadcrumb_bg">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb_iner text-center">
                    <div class="breadcrumb_iner_item">
                        <h2>{{ guide.title }}</h2>
                        <p>Home <span>//</span> Guide <span>//</span> {{ guide.game.name }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="blog_area single-post-area section_padding">
   <div class="container">
      <div class="row">
         <div class="col-lg-8 posts-list">
            <div class="single-post">
               
               <div class="feature-img">
                  {% if guide.coverImage %}
                      <img class="img-fluid" src="{{ asset('uploads/guide/' ~ guide.coverImage) }}" alt="{{ guide.title }}" style="width:100%; max-height: 500px; object-fit: cover; border-radius: 10px; margin-bottom: 30px;">
                  {% else %}
                      <div class="alert alert-secondary text-center">No cover image uploaded for this guide.</div>
                  {% endif %}
               </div>
               
               <div class="blog_details">
                  <h2>{{ guide.title }}</h2>
                  <ul class="blog-info-link mt-3 mb-4">
                     <li><a href="#"><i class="far fa-user"></i> Game: {{ guide.game.name }}</a></li>
                     <li><a href="#"><i class="far fa-comments"></i> Difficulty: {{ guide.difficulty }}</a></li>
                  </ul>
                  
                  <p class="excert">
                     {{ guide.description|nl2br }}
                  </p>

                  <div class="quote-wrapper">
                     <div class="quotes">Step-by-Step Walkthrough</div>
                  </div>
                  
                  <div class="guide-steps mt-5 mb-5">
                      {% for step in guide.guideSteps %}
                          <div class="step-item mb-5 border-bottom pb-4">
                              <h4 class="mb-3" style="color: #ff005c;">Step {{ step.stepOrder }}: {{ step.title }}</h4>
                              
                              {% if step.image %}
                                  <img src="{{ asset('uploads/guide/' ~ step.image) }}" class="img-fluid my-3 rounded" style="max-height: 350px;">
                              {% endif %}
                              
                              {% if step.videoUrl %}
                                  <div class="video-container mt-3 mb-3">
                                      <iframe width="100%" height="315" src="{{ step.videoUrl|replace({'watch?v=': 'embed/'}) }}" frameborder="0" allowfullscreen></iframe>
                                  </div>
                              {% endif %}
                              
                              <p>{{ step.content|nl2br }}</p>
                          </div>
                      {% else %}
                          <p class="text-muted">No steps added yet.</p>
                      {% endfor %}
                  </div>
               </div>
            </div>
         </div>
         
         {# SIDEBAR #}
         <div class="col-lg-4">
            <div class="blog_right_sidebar">
               <aside class="single_sidebar_widget post_category_widget" style="background: #111235; border: 1px solid #2a2b5e;">
                  <h4 class="widget_title" style="color: white;">Game Info</h4>
                  <ul class="list cat-list">
                     <li>
                        <a href="#" class="d-flex justify-content-between">
                           <p style="color: #ccc;">Game</p>
                           <p style="color: #ccc;">{{ guide.game.name }}</p>
                        </a>
                     </li>
                     <li>
                        <a href="#" class="d-flex justify-content-between">
                           <p style="color: #ccc;">Difficulty</p>
                           <p style="color: #ccc;">{{ guide.difficulty }}</p>
                        </a>
                     </li>
                  </ul>
               </aside>
            </div>
         </div>
      </div>
   </div>
</section>
{% endblock %}