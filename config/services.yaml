# This file is the entry point to configure your own services.

parameters:
    product_images_dir: '%kernel.project_dir%/public/uploads/products'
    app.mail_from: '%env(APP_MAIL_FROM)%'
    ml_api_base_url: '%env(resolve:ML_API_BASE_URL)%'

services:
    _defaults:
        autowire: true
        autoconfigure: true

    # Auto-register everything in src/
    App\:
        resource: '../src/'
        exclude:
            - '../src/DependencyInjection/'
            - '../src/Entity/'
            - '../src/Kernel.php'

    # âœ… Explicit override: inject baseUrl into ML API client
    App\Service\MlApiClient:
        arguments:
            $baseUrl: '%ml_api_base_url%'

    # Explicit mailer service with FROM email
    App\Service\OrderMailer:
        arguments:
            $fromEmail: '%app.mail_from%'

    # Explicit PDF generator (force register)
    App\Service\InvoicePdfGenerator: ~